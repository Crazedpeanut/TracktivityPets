{% extends 'tracktivityPetsWebsite/base.html' %}
{% load staticfiles %}

{% block navbar %}
	{% include 'tracktivityPetsWebsite/navigationbar.html' %}
{% endblock navbar %}

{% block content_block %}
<div class="container-fluid">

	    	<style type="text/css">
				.carousel-content {
				    color:black;
				    display:flex;
				    align-items:center;
				    margin: 20px;
				}
				
				.carousel-control.left, .carousel-control.right {
				    background-image: none
				}
				
				.carousel-control{
				  color: #000;
				}
				
			</style>

			
			<script type="text/javascript"> 
			
				$(document).ready(function(){
					$("#myCarousel").carousel({
				    	interval : false
				    });
					
					$("#myCarousel").on('slide.bs.carousel', function (e) {
				       var xx = $(this);
				       setTimeout(function() {
				            var image_alt = $(".carousel-inner").find(".active").find("img").attr("alt");
					  		$("#pet_content").children().hide();
					  		$("[id='"+image_alt+"_content']").show();
					  		
				       } , 700);
				   });
				   
			   		var image_alt = $(".carousel-inner").find(".active").find("img").attr("alt");
			  		$("#pet_content").children().hide();
			  		$("[id='"+image_alt+"_content']").show();
				});
				setCarouselHeight('myCarousel');
	
			    function setCarouselHeight(id)
			    {
			        var slideHeight = [];
			        $(id+' .item').each(function()
			        {
			            // add all slide heights to an array
			            slideHeight.push($(this).height());
			        });
			
			        // find the tallest item
			        max = Math.max.apply(null, slideHeight);
			
			        // set the slide's height
			        $(id+' .carousel-content').each(function()
			        {
			            $(this).css('height',max+'px');
			        });
			    }
			    
			    var pet_number =  1;
			    var pets_available_count = {{ pets_available_count }}
			    
			    
			    $(function () {	        
			        
			        $('.carousel-control.left').click(function() {
			        	pet_number--;
			        	if(pet_number < 1) { pet_number = pets_available_count; }
					  $('#viewing_pet_number').html(pet_number);
					  

						
						
					});
					
					$('.carousel-control.right').click(function() {
						pet_number++;
			        	if(pet_number > pets_available_count) { pet_number = 1; }
						$('#viewing_pet_number').html(pet_number);
					});
				});
				
				function getPet()
				{
					var image_alt = $(".carousel-inner").find(".active").find("img").attr("alt");
					$("#petSubmitForm").find("#pet").val(image_alt);
				}
		    </script>
			
			<div class="col-md-4 text-center">
				<p>Viewing pet <span id="viewing_pet_number">1</span> of {{ pets_available_count }}</p>
				<div id="myCarousel" class="carousel slide" data-ride="carousel">

				    <div class="row">
				        <div class="col-xs-offset-3 col-xs-6">
				            <div class="carousel-inner">
								{% for key, value in available_pets.items %}
									{% if forloop.first %}
										<div class="item active">
									{% else %}
										<div class="item">
									{% endif %}
									
									<img src="{{ value.image }}" alt="{{ value.name }}"/>
									</div>
								{% endfor %}

				            </div>
				        </div>
				    </div>

				    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
				    	<span class="glyphicon glyphicon-chevron-left"></span>
				  	</a>
				 	<a class="right carousel-control" href="#myCarousel" data-slide="next">
				    	<span class="glyphicon glyphicon-chevron-right"></span>
				  	</a>
				
				</div>
				
				<form method="POST" onsubmit="getPet()" id="petSubmitForm">
					{% csrf_token %}
					Pet Name:<br/>
					<input type="text" name="user_pet_name"><br/>
					<input type="submit" value="Adopt!"/>
					<input type="hidden" name="default_pet_name" value="" id="pet"/>
					
				</form>
			</div>
			
			
			
			<div class="col-md-4 text-center" id="pet_content" class="infoitem">
				{% for key, value in available_pets.items %}
					<div id="{{ value.name }}_content">
						<h3> {{ value.name }}</h3>
						<img src="{{ value.image }}" alt="{{ value.name }}" width="300px" height="300px"/>
						<p> {{ value.story }}</p>
					</div>
				{% endfor %}
			</div>
			
			<div class="col-md-3 text-center">
			</div>
	    	
	    </div>
	</div>


{% endblock content_block %}