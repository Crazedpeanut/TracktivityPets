{% extends 'tracktivityPetsWebsite/base.html' %}
{% load staticfiles %}

{% block navbar %}
    {% include 'tracktivityPetsWebsite/navigationbar.html' %}
{% endblock navbar %}

{% block content_block %}

    <script type="text/javascript">
        $(document).ready(function()
        {                        
            $("#inventory_grid_button").click(function()
            {
                if (screen.width <= 768) {
                    $('#myModal').modal();
                }                
            });
        });
    </script>
    
    <script src="http://code.jquery.com/jquery-latest.min.js"
	        type="text/javascript"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			$("#collected > div").click(function(event) 
			{
				
			  	$.ajax( "http://127.0.0.1:8000/view_purchased_pet/" + event.target.id.split("_").pop())
					.done(function(data) {
					  	var obj = JSON.parse(data);
					    $("#inventory_detail_header").html(obj.name);
					    $("#inventory_detail_pet_level").html("Level " + obj.level);
					    $("#inventory_detail_pet_description").html(obj.story);
					    $("#inventory_detail_buttons").html('<button class="btn btn-lg btn-primary col-md-3 col-centred" type="button">Rename</button><button class="btn btn-lg btn-primary col-md-3 col-centred" type="submit">Activate!</button>');
				  	})
				  	.fail(function() {

				  	})
				  	.always(function() {
				    
				  	});
			});
			$("#unpurchased > div").click(function(event) 
			{
				var id = $(this).attr("id").split("_").pop(); //unpurchased_x becomes x
				
				$.ajax( "http://127.0.0.1:8000/view_unpurchased_pet/" + id)
					.done(function(data) {
					  	var obj = JSON.parse(data);
					    $("#inventory_detail_header").html(obj.name);
					    $("#inventory_detail_pet_level").html("Cost " + obj.cost);
					    $("#inventory_detail_pet_description").html(obj.story);
					    $("#inventory_detail_buttons").html('<button class="btn btn-lg btn-primary col-md-3 col-centred" type="button">Buy</button>');
				  	})
				  	.fail(function() {

				  	})
				  	.always(function() {

				  	});
			  });
		});
	</script>

    <div class="container" id="inventory_header">
        <div class="row">
            <img class="bubbletext_header col-xs-12 col-md-4 col-md-offset-4" src="{% static 'tracktivityPetsWebsite/images/inventory_text.png' %}">
        </div>
    </div>

    <div class="container" id="inventory_container">
        <ul class="nav nav-tabs" id="inventory_tabs">
            <li class="active col-md-2 col-xs-4"><a href="#">Pets</a></li>
            <li class="col-md-2 col-xs-4"><a href="#">Scenery</a></li>
            <li class="col-md-2 col-xs-4"><a href="#">Cosmetics</a></li>            
        </ul>    
        
        <div class="col-md-6 container" id="inventory_grid">  
        	
        	<span id="collected">
	            {% for pet in collected_pets %}
		            <div class="col-xs-4" class="inventory_pet" id="collected_{{ pet.pk }}">
		            	<button class="">
		                <img class="img-responsive img-circle" src="/static/tracktivityPetsWebsite/images/splash_portrait.png">
		                <p class="">{{ pet.name }}</p>
		                </button>            
		            </div>
	            {% endfor %}
            </span>
            
            <span id="unpurchased">
	            {% for pet in unpurchased_pets %}
		            <div class="col-xs-4" class="inventory_pet" id="unpurchased_{{ pet.pk }}">
		            	<button class="">
		                <img class="img-responsive img-circle" src="/static/tracktivityPetsWebsite/images/splash_portrait.png">
		                <p class="">{{ pet.default_name }}</p>
		                </button>            
		            </div>
	            {% endfor %}
           </span>
            
                  
           
        </div>
        
        <div class="col-xs-6 container hidden-xs" id="inventory_detail">
            <div class="row"><h2 class="col-centred" id="inventory_detail_header">Sir Oinksalot</h2></div>
            <div class="row"><img class="img-responsive col-xs-9 col-centred" src="/static/tracktivityPetsWebsite/images/splash_portrait.png" id="inventory_detail_image"></div>
            <div class="row">
                <p id="inventory_detail_pet_description" class="col-xs-12 col-md-8 col-centred">
                    He is a pig with wheels! What an amazing guy! This is all completely static images and text.
                    He is a pig with wheels! What an amazing guy! This is all completely static images and text.
                </p>
            </div>        
            <div class="row"><h4 id="inventory_detail_pet_level">Level 4</h4></div>
            <div class="row"><h5 id="inventory_detail_pet_age">5 Days Old</h5></div>
            <div class="row" id="inventory_detail_buttons">
                <button class="btn btn-lg btn-primary col-md-3 col-centred" type="button">Rename</button>
                <button class="btn btn-lg btn-primary col-md-3 col-centred" type="submit">Activate!</button>
            </div>
        </div>
        
        <div class="container">            
            <!-- Modal -->
            <div class="modal fade" id="myModal" role="dialog" id="inventory_detail_modal">
                <div class="modal-dialog">
              
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Sir Oinksalot</h4>
                    </div>
                    <div class="modal-body">
                        <img class="img-responsive col-xs-9 col-centred" src="/static/tracktivityPetsWebsite/images/splash_portrait.png" />
                        <p>He is a pig with wheels! What an amazing guy! 
                        This is all completely static images and text. He is a pig with wheels! 
                        What an amazing guy! This is all completely static images and text.</p>
                        <div><h4 id="inventory_detail_pet_level">Level 4</h3></div>
                        <div><h5 id="inventory_detail_pet_age">5 Days Old</h5></div>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Dismiss</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Rename</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Activate!</button>
                    </div>
                </div>        
            </div>
        </div>  
    </div>
   

{% endblock content_block %}